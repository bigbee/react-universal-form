!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("prop-types"),require("recompose")):"function"==typeof define&&define.amd?define("react-universal-form",["prop-types","recompose"],r):"object"==typeof exports?exports["react-universal-form"]=r(require("prop-types"),require("recompose")):e["react-universal-form"]=r(e["prop-types"],e.recompose)}(this,function(e,r){return function(e){function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=2)}([function(r,t){r.exports=e},function(e,t){e.exports=r},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.withInput=void 0;var n=t(3);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var u=t(4);r.withInput=u.withInput},function(e,r,t){"use strict";function n(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.setFieldValue=r.validateField=r.touchField=r.composeActions=r.withForm=r.fieldDefaults=r.rules=void 0;var i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},c=t(0),s=function(e){return e&&e.__esModule?e:{default:e}}(c),a=t(1),l=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.([a-z]+)|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,f=(r.rules={required:function(e){return!!e.value},email:function(e){var r=e.value;return r&&r.match(l)}},r.fieldDefaults={value:"",error:!0,rules:function(){return!1},message:"Please fill out this field",touched:!1},function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.touchedOnChange,c=void 0===t||t,l=r.touchedOnBlur,f=void 0===l||l,p=r.onSubmit;return(0,a.compose)((0,a.withReducer)("form","setForm",function(e,r){return r(e)},i({},e)),(0,a.withHandlers)({onChangeFieldValue:function(e){var r=e.setForm;return function(e,t){r(d.apply(void 0,o([b(e,t),h(e)].concat(c?[v(e)]:[]))))}},onFieldBlur:function(e){var r=e.setForm;return function(e){return f&&r(v(e))}}}),(0,a.lifecycle)({componentWillMount:function(){var e=this;this._lastId=0,this._subscriptions={};var r=function(r){var t=e._lastId+1;return e._lastId=t,e._subscriptions=i({},e._subscriptions,u({},t,r)),function(){var r=e._subscriptions,u=(r[t],n(r,[t]));e._subscriptions=u}},t=function(){return p&&p(e.props.form)};this.setState(function(e){return i({},e,{subscribe:r,onSubmit:t})})},componentDidUpdate:function(){var e=this.props.form;Object.values(this._subscriptions).forEach(function(r){return r(e)})}}),(0,a.withContext)({form:s.default.object.isRequired,onChangeFieldValue:s.default.func.isRequired,onFieldBlur:s.default.func.isRequired,subscribe:s.default.func.isRequired},function(e){var r=e.onChangeFieldValue,t=e.onFieldBlur;return{form:e.form,onChangeFieldValue:r,onFieldBlur:t,subscribe:e.subscribe}}),(0,a.withProps)(function(e){var r=e.form,t=Object.values(r),n=t.length;return{isValid:0===t.filter(function(e){return e.error}).length,isTouched:t.filter(function(e){return e.touched}).length===n}}))});r.withForm=f;var d=r.composeActions=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e){return r.reduce(function(e,r){return r?r(e):e},e)}},p=function(e,r){return function(t){return i({},t,u({},e,r(t[e])))}},v=r.touchField=function(e){return p(e,function(e){return i({},e,{touched:!0})})},h=r.validateField=function(e){return p(e,function(e){return i({},e,{error:!e.rules(e.value)})})},b=r.setFieldValue=function(e,r){return p(e,function(e){return i({},e,{value:r})})}},function(e,r,t){"use strict";function n(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}Object.defineProperty(r,"__esModule",{value:!0}),r.withInput=void 0;var u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),c=t(1),s=function(e){return(0,c.compose)(c.pure,(0,c.getContext)({form:i.default.object.isRequired,onChangeFieldValue:i.default.func.isRequired,onFieldBlur:i.default.func.isRequired,subscribe:i.default.func.isRequired}),(0,c.lifecycle)({componentWillMount:function(){var e=this.props.form;this.setState(function(r){return u({},r,{form:e})})},componentDidMount:function(){var r=this,t=this.props.subscribe,n=function(t){t[e]!==r.state.form[e]&&r.setState(function(e){return u({},e,{form:t})})};this._unsubscribe=t(n)},componentWillUnmount:function(){this._unsubscribe(),delete this._unsubscribe}}),(0,c.mapProps)(function(r){var t=r.form[e],o=r.onChangeFieldValue,i=r.onFieldBlur,c=(r.subscribe,n(r,["form","onChangeFieldValue","onFieldBlur","subscribe"]));return u({},c,{valid:t.touched&&!t.error,invalid:t.error&&t.touched,value:t.value,onChangeText:o.bind(void 0,e),onBlur:i.bind(void 0,e)})}))};r.withInput=s}])});